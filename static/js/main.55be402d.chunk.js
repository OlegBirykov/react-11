(this["webpackJsonpreact-11"]=this["webpackJsonpreact-11"]||[]).push([[0],{30:function(e,t,r){},31:function(e,t,r){},39:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r(15),a=r.n(c),i=(r(30),r(25)),s=r(4),o=(r(31),r(10)),l=r(9),d=r.n(l),u=r(14),b="FETCH_SERVICES_REQUEST",p="FETCH_SERVICES_FAILURE",j="FETCH_SERVICES_SUCCESS",v="DELETE_SERVICE_REQUEST",O="DELETE_SERVICE_FAILURE",E="DELETE_SERVICE_SUCCESS",h="EDIT_SERVICE_REQUEST",m="EDIT_SERVICE_FAILURE",f="EDIT_SERVICE_SUCCESS",x="CHANGE_SERVICE_FIELD",g="ADD_SERVICE_REQUEST",S="ADD_SERVICE_FAILURE",y="ADD_SERVICE_SUCCESS",_="ADD_SERVICE_FINISH",C=function(e){return{type:v,payload:{id:e}}},w=function(e){return{type:E,payload:{id:e}}},N=function(e){return{type:S,payload:{addingError:e}}},I=function(){var e=Object(u.a)(d.a.mark((function e(t){var r,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:b}),e.prev=1,e.next=4,fetch("".concat("http://localhost:7070/api/services"));case 4:if((r=e.sent).ok){e.next=7;break}throw new Error(r.statusText);case 7:return e.next=9,r.json();case 9:n=e.sent,t({type:j,payload:{items:n}}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),t((c=e.t0.message,{type:p,payload:{error:c}}));case 16:case"end":return e.stop()}var c}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(u.a)(d.a.mark((function e(t,r){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(C(r)),e.prev=1,e.next=4,fetch("".concat("http://localhost:7070/api/services","/").concat(r),{method:"DELETE"});case 4:if((n=e.sent).ok){e.next=7;break}throw new Error(n.statusText);case 7:t(w(r)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t((c=e.t0.message,{type:O,payload:{error:c}}));case 13:case"end":return e.stop()}var c}),e,null,[[1,10]])})));return function(t,r){return e.apply(this,arguments)}}(),k=function(){var e=Object(u.a)(d.a.mark((function e(t,r){var n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:h}),e.prev=1,e.next=4,fetch("".concat("http://localhost:7070/api/services","/").concat(r));case 4:if((n=e.sent).ok){e.next=7;break}throw new Error(n.statusText);case 7:return e.next=9,n.json();case 9:c=e.sent,t({type:f,payload:{item:c}}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),t((a=e.t0.message,{type:m,payload:{loadingError:a}}));case 16:case"end":return e.stop()}var a}),e,null,[[1,13]])})));return function(t,r){return e.apply(this,arguments)}}(),R=function(){var e=Object(u.a)(d.a.mark((function e(t,r){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:g,payload:{name:void 0,price:void 0,content:void 0}}),e.prev=1,e.next=4,fetch("".concat("http://localhost:7070/api/services"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 4:if((n=e.sent).ok){e.next=7;break}throw new Error(n.statusText);case 7:t({type:y}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t(N(e.t0.message));case 13:I(t);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,r){return e.apply(this,arguments)}}(),T=r(1);var A=function(e){var t=e.history,r=e.match,c=Object(o.c)((function(e){return e.serviceAdd})),a=c.item,i=c.loading,s=c.loadingError,l=c.adding,d=c.addingError,u=c.finish,b=Object(o.b)();Object(n.useEffect)((function(){k(b,r.params.id)}),[b,r.params.id]),Object(n.useEffect)((function(){u&&(b({type:_}),t.push("/react-11/services"))}),[u]);var p=function(e){var t=e.target,r=t.name,n=t.value;b(function(e,t){return{type:x,payload:{name:e,value:t}}}(r,n))};return s?Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("p",{className:"error",children:s}),Object(T.jsx)("button",{className:"error-button",onClick:function(){k(b,r.params.id)},children:"\u041f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0435\u0449\u0451 \u0440\u0430\u0437"})]}):i?Object(T.jsx)("svg",{className:"spinner ServiceAdd-spinner",viewBox:"0 0 50 50",children:Object(T.jsx)("circle",{className:"spinner-circle ServiceAdd-spinner-circle",cx:"25",cy:"25",r:"20",fill:"none"})}):Object(T.jsxs)("form",{className:"ServiceAdd",onSubmit:function(e){e.preventDefault();var t={id:a.id,name:a.name.trim(),price:"string"===typeof a.price?a.price.trim():a.price,content:a.content.trim()};t.name?t.price?(t.price=Math.trunc(+t.price),isNaN(t.price)||t.price<=0?b(N('\u0412 \u043f\u043e\u043b\u0435 "\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c" \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0446\u0435\u043b\u043e\u0435 \u043f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0447\u0438\u0441\u043b\u043e \u0431\u0435\u0437 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432')):R(b,t)):b(N('\u0412 \u043f\u043e\u043b\u0435 "\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c" \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0446\u0435\u043b\u043e\u0435 \u043f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0447\u0438\u0441\u043b\u043e \u0431\u0435\u0437 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432')):b(N('\u041f\u043e\u043b\u0435 "\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435" \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c'))},children:[Object(T.jsxs)("label",{children:["\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",Object(T.jsx)("input",{name:"name",disabled:l,onChange:p,value:a.name})]}),Object(T.jsxs)("label",{children:["\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c",Object(T.jsx)("input",{name:"price",disabled:l,onChange:p,value:a.price})]}),Object(T.jsxs)("label",{children:["\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",Object(T.jsx)("input",{name:"content",disabled:l,onChange:p,value:a.content})]}),Object(T.jsxs)("div",{className:"ServiceAdd-buttons",children:[Object(T.jsx)("button",{className:l?"ServiceAdd-button-cancel button-disabled":"ServiceAdd-button-cancel",onClick:function(){t.push("/react-11/services")},disabled:l,children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(T.jsxs)("button",{className:l?"ServiceAdd-button-save button-spinner":"ServiceAdd-button-save",type:"submit",disabled:l,children:[l?"\u0421":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",l&&Object(T.jsx)("svg",{className:"spinner ServiceAdd-button-spinner",viewBox:"0 0 50 50",children:Object(T.jsx)("circle",{className:"spinner-circle ServiceAdd-button-spinner-circle",cx:"25",cy:"25",r:"20",fill:"none"})})]})]}),d&&Object(T.jsx)("p",{className:"ServiceAdd-error",children:d})]})};var L=function(e){var t=e.history,r=Object(o.c)((function(e){return e.serviceList})),c=r.items,a=r.loading,i=r.error,s=r.deletingFinish,l=Object(o.b)();return Object(n.useEffect)((function(){I(l)}),[l]),Object(n.useEffect)((function(){s&&I(l)}),[l,s]),i?Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("p",{className:"error",children:i}),Object(T.jsx)("button",{className:"error-button",onClick:function(){I(l)},children:"\u041f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0435\u0449\u0451 \u0440\u0430\u0437"})]}):a?Object(T.jsx)("svg",{className:"spinner ServiceList-spinner",viewBox:"0 0 50 50",children:Object(T.jsx)("circle",{className:"spinner-circle ServiceList-spinner-circle",cx:"25",cy:"25",r:"20",fill:"none"})}):Object(T.jsx)("ul",{className:"ServiceList",children:c.map((function(e){return Object(T.jsxs)("li",{className:"ServiceList-item",children:[Object(T.jsx)("p",{className:"ServiceList-text",children:"".concat(e.name,": ").concat(e.price," \u0440\u0443\u0431.")}),!(e.deleting||e.isDeleted)&&Object(T.jsx)("button",{className:"ServiceList-button-edit",onClick:function(){return r=e.id,void t.push("/react-11/services/"+r);var r},children:"\u270e"}),Object(T.jsxs)("button",{className:e.deleting||e.isDeleted?"ServiceList-button-delete button-spinner":"ServiceList-button-delete",disabled:e.deleting||e.isDeleted,onClick:function(){return t=e.id,void D(l,t);var t},children:["\u2715",(e.deleting||e.isDeleted)&&Object(T.jsx)("svg",{className:"spinner ServiceList-button-spinner",viewBox:"0 0 50 50",children:Object(T.jsx)("circle",{className:"spinner-circle ServiceList-button-spinner-circle",cx:"25",cy:"25",r:"20",fill:"none"})})]})]},e.id)}))})};var V=function(){return Object(T.jsx)(i.a,{children:Object(T.jsx)("div",{className:"App",children:Object(T.jsxs)(s.d,{children:[Object(T.jsx)(s.b,{path:"/react-11/services/:id([0-9]+)",component:A}),Object(T.jsx)(s.b,{path:"/react-11/services",component:L}),Object(T.jsx)(s.a,{to:"/react-11/services"})]})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var F=r(13),U=r(2),B={items:[],loading:!1,error:null,deletingFinish:!1};var H=r(17),Q={item:{id:"",name:"",price:"",content:""},loading:!1,loadingError:null,adding:!1,addingError:null,finish:!1};var X=Object(F.b)({serviceList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(U.a)(Object(U.a)({},e),{},{loading:!0,error:null,deletingFinish:!1});case p:var r=t.payload.error;return Object(U.a)(Object(U.a)({},e),{},{loading:!1,error:r});case j:var n=t.payload.items;return Object(U.a)(Object(U.a)({},e),{},{items:n,loading:!1,error:null});case v:var c=t.payload.id;return Object(U.a)(Object(U.a)({},e),{},{items:e.items.map((function(e){return e.id===c?Object(U.a)(Object(U.a)({},e),{},{deleting:!0}):e}))});case O:var a=t.payload.error;return Object(U.a)(Object(U.a)({},e),{},{error:a});case E:var i=t.payload.id,s=Object(U.a)(Object(U.a)({},e),{},{items:e.items.map((function(e){return e.id===i?Object(U.a)(Object(U.a)({},e),{},{deleting:!1,isDeleted:!0}):e}))});return Object(U.a)(Object(U.a)({},s),{},{deletingFinish:s.items.reduce((function(e,t){return e&&!t.deleting}),!0)});default:return e}},serviceAdd:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(U.a)(Object(U.a)({},e),{},{loading:!0,loadingError:null,adding:!1,addingError:null});case m:var r=t.payload.loadingError;return Object(U.a)(Object(U.a)({},e),{},{loading:!1,loadingError:r});case f:var n=t.payload.item;return Object(U.a)(Object(U.a)({},e),{},{item:n,loading:!1,loadingError:null});case x:var c=t.payload,a=c.name,i=c.value;return Object(U.a)(Object(U.a)({},e),{},{item:Object(U.a)(Object(U.a)({},e.item),{},Object(H.a)({},a,i))});case g:return Object(U.a)(Object(U.a)({},e),{},{adding:!0,error:null});case S:var s=t.payload.addingError;return Object(U.a)(Object(U.a)({},e),{},{adding:!1,addingError:s});case y:return Object(U.a)(Object(U.a)({},e),{},{adding:!1,addingError:null,finish:!0});case _:return Object(U.a)({},Q);default:return e}}}),J=Object(F.c)(X,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());a.a.render(Object(T.jsx)(o.a,{store:J,children:Object(T.jsx)(V,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[39,1,2]]]);
//# sourceMappingURL=main.55be402d.chunk.js.map